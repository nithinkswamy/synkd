{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nithin.DESKTOP-4GS3RPD\\\\Music\\\\synkd-kasturi\\\\synkd-kasturi\\\\src\\\\pages\\\\Room\\\\RoomComponent.jsx\";\n/* This page loads all the slots available for a chip*/\n\nimport { IonContent, IonIcon, IonButton, IonLabel, IonItem, IonSegmentButton, IonSegment, IonToolbar, IonTitle, IonHeader, IonToast, IonRefresher, IonRefresherContent, IonPopover, IonLoading, IonActionSheet, IonModal, IonListHeader } from \"@ionic/react\";\nimport { hardwareChip, addCircle, tvSharp, bulb, arrowBack, pencilSharp, timerSharp, calendarSharp } from \"ionicons/icons\";\nimport React from \"react\";\nimport { withRouter } from \"react-router\";\n//import Websocket from \"react-websocket\";\nimport ScriptTag from \"react-script-tag\";\nimport \"./Slots.css\";\nimport AddToGroupModal from \"./UI/AddToGroupModal\";\nimport SlotGrid from \"./UI/SlotGrid\";\nimport { retrieveSwitchControllers, SOCKETIOLIB } from \"../ServerRequests/globalApi\";\nimport SetupBuilderChipModalComponentHolder from \"../BuilderChip/SetupBuilderChipModalComponentHolder\";\nimport SetupSlotModalComponentHolder from \"./SetupSlotModalComponentHolder\";\nimport { toggleSlot, getChipMac, startTimer } from \"../ServerRequests/localApi\";\nimport { SOCKETIOHOST, retrieveSlots } from \"../ServerRequests/globalApi\";\nvar defaultChipName = \"\";\nvar iconname = \"\";\nconst contentStyle = {\n  height: \"90px\",\n  justifyContent: \"center\",\n  width: \"90px\"\n};\nconst test = {\n  borderRadius: \"1rem\",\n  width: \"15rem\",\n  height: \"12rem\",\n  margin: \"0px auto\",\n  display: \"table\",\n  position: \"absolute\",\n  left: \"50%\",\n  right: \"50%\",\n  top: \"50%\",\n  border: \"1px solid\",\n  transform: \"translate(-50%, -50%)\",\n  padding: \"5px 20px 13px\",\n  background: \"rgb(255, 255, 255)\"\n};\nvar toastMsg = \"\";\nvar data = \"\";\nvar auth_token = \"\";\nvar IP = \"\";\nvar check = \"\";\nvar username = JSON.parse(localStorage.getItem(\"username\"));\nvar slot_count;\nvar localSocket;\nclass RoomComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this._isMounted = true;\n    auth_token = JSON.parse(localStorage.getItem(\"token\"));\n    this.state = {\n      roomid: \"\",\n      switchitems: [],\n      name: \"\",\n      state: \"0\",\n      mac: \"\",\n      ip: \"\",\n      showPopover: undefined,\n      slotCount: 8,\n      showToast: false,\n      showGroupActionSheet: false,\n      showPickGroupModal: false,\n      showSetupBuilderChipModal: false,\n      showSetupSlotModal: false,\n      toggleAttemting: false\n    };\n  }\n  showSetupBuilderChipModal() {\n    this.setState({\n      showSetupBuilderChipModal: true\n    });\n  }\n  closeSetupBuilderChipModal() {\n    this.setState({\n      showSetupBuilderChipModal: false\n    });\n  }\n  refreshPage() {\n    window.location.reload();\n  }\n  sloticonfn(e) {\n    if (e === tvSharp) {\n      iconname = tvSharp;\n      return iconname;\n    }\n    if (e === bulb) {\n      iconname = bulb;\n      return iconname;\n    }\n  }\n  componentDidMount() {\n    this._isMounted = true;\n    this.LoadChips();\n    document.addEventListener('ionBackButton', ev => {\n      ev.detail.register(10, () => {\n        this.props.component({\n          ComponentType: \"HOME\"\n        });\n        console.log(\"Back Pressed\");\n      });\n    });\n  }\n  componentWillUnmount() {\n    try {\n      if (window.socket !== undefined) {\n        window.socket.close();\n      }\n      if (localSocket !== undefined) {\n        localSocket.close();\n      }\n      console.log('Disconnected Sockets.');\n    } catch (err) {\n      console.log(err);\n    }\n    this._isMounted = false;\n  }\n  cloudSocket() {\n    const script = document.createElement(\"script\");\n    script.innerHTML += \"var socket = io.connect('\" + SOCKETIOHOST + \"');\";\n    script.innerHTML += \"window.socket = socket;\";\n    script.async = true;\n    document.body.appendChild(script);\n    console.log(\"entered cloud socket:\" + String(window.socket));\n    var chips = JSON.parse(localStorage.getItem(this.state.roomid));\n    if (chips !== null) {\n      for (var i = 0; i < chips.length; i++) {\n        var macJson = JSON.parse(JSON.stringify({\n          mac: chips[i].mac\n        }));\n        window.socket.emit(\"subscribe\", macJson);\n      }\n    }\n    window.socket.on(\"connect_error\", err => {\n      console.log(`connect_error due to ${err.message}`);\n    });\n    window.socket.on(\"state\", data => {\n      console.log(\"sio state: \" + data.state);\n      this.setState({\n        chipstate: data.state\n      });\n    });\n    window.socket.on(\"connected\", data => {\n      console.log(\"connected to socketio\");\n    });\n    window.socket.on(\"connection\", data => {\n      console.log(\"connection to socketio\");\n    });\n    window.socket.on(\"connect\", data => {\n      console.log(\"connect to socketio\");\n    });\n  }\n  websocketfn() {\n    IP = JSON.parse(localStorage.getItem(this.state.mac)).ip;\n    localSocket = new WebSocket(\"ws://\" + IP + \":81/\");\n    console.log(\"Local IP:\" + IP);\n    var ctx = this;\n    localSocket.onmessage = function (evt) {\n      var type = evt.data.split(\"~\")[0];\n      var mac = evt.data.split(\"~\")[1];\n      var chipstate = evt.data.split(\"~\")[2];\n      if (mac === this.state.mac && type === \"state\") {\n        console.log(\"lws\");\n        ctx.updateChipState(chipstate);\n      }\n    };\n    localSocket.onopen = function (evt) {\n      console.log(\"Local WS Open\");\n    };\n    localSocket.onclose = function (evt) {\n      console.log(\"Local WS CLosed\");\n    };\n  }\n  handleToast() {\n    this.setState({\n      tshow: !this.state.tshow\n    });\n  }\n  async onClickBtnFn(slotnumber) {\n    console.log(\"Tapped\", slotnumber);\n    this.setState({\n      toggleAttemting: true\n    });\n    var slotnum = slotnumber - 1;\n    IP = JSON.parse(localStorage.getItem(this.state.mac)).ip;\n    const isIPCorrect = await this.verifyMac();\n    if (isIPCorrect) {\n      var response = await toggleSlot(IP, slotnum);\n      if (response !== undefined) {\n        switch (response[0].status) {\n          case 200 || 302:\n            console.log(\"Toggled slot \" + slotnum + \" via local ws.\");\n            break;\n          default:\n            console.log(\"Failed to toggle slot via local ws. Attempting toggle via cloud.(SocketIO)\");\n            console.log(\"Failed to toggle slot via local ws.\");\n            window.socket.emit(\"toggle\", {\n              mac: this.state.mac,\n              slot: slotnum\n            });\n            // window.socket.emit(\"timer-start\", { mac: this.state.mac, slot: slotnum });\n            break;\n        }\n      } else {\n        console.log(\"Failed to toggle slot via local ws. Attempting toggle via cloud.(SocketIO)\");\n        try {\n          window.socket.emit(\"toggle\", {\n            mac: this.state.mac,\n            slot: slotnum\n          });\n          // window.socket.emit(\"timer-start\", { mac: this.state.mac, slot: slotnumber });\n        } catch {\n          toastMsg = \"Failed to toggle device. Please try again.\";\n          this.handleToast();\n        }\n      }\n    } else {\n      console.log(\"Failed to toggle slot via local ws. Attempting toggle via cloud.(SocketIO)\");\n      try {\n        window.socket.emit(\"toggle\", {\n          mac: this.state.mac,\n          slot: slotnum\n        });\n        // window.socket.emit(\"timer-start\", { mac: this.state.mac, slot: slotnumber });\n      } catch {\n        toastMsg = \"Failed to toggle device. Please try again.\";\n        this.handleToast();\n      }\n    }\n    this.setState({\n      toggleAttemting: false\n    });\n  }\n  async verifyMac() {\n    var chips = JSON.parse(localStorage.getItem(this.state.roomid));\n    console.log(this.state.roomid);\n    for (var i = 0; i < chips.length; i++) {\n      if (chips[i] === this.state.mac) {\n        IP = JSON.parse(localStorage.getItem(this.state.mac)).ip;\n      }\n    }\n    const response = await getChipMac(IP);\n    if (response !== undefined) {\n      console.log(response[0]);\n      switch (response[0].status) {\n        case 200:\n          if (response[0].data.mac === this.state.mac) {\n            return true;\n          } else {\n            console.log(\"Incorrect local IP.\");\n            this.getIPfromCloud();\n            return false;\n          }\n        case 404:\n          console.log(\"Could not verify local IP. Error:\" + response[0].data);\n          return false;\n        default:\n          console.log(\"Could not verify local IP. Error:\" + response[0].data);\n          return false;\n      }\n    } else {\n      return false;\n    }\n  }\n  async getIPfromCloud() {\n    var data = JSON.stringify({\n      mac: this.state.mac\n    });\n    console.log(\"Attempting to get new ip of \" + this.state.mac);\n    const response = await retrieveSlots(data);\n    if (response !== undefined) {\n      console.log(response[0]);\n      switch (response[0].status) {\n        case 200:\n          var existing = JSON.parse(localStorage.getItem(this.state.mac));\n          existing.ip = response[0].data.ip;\n          localStorage.setItem(this.state.mac, existing);\n          console.log(\"Attempt to retrieve ip from cloud sucessful.\");\n\n          // this.websocketfn();\n          break;\n        default:\n          console.log(\"Could not retrieve chip ip from cloud.\");\n          break;\n      }\n    } else {\n      console.log(\"Could not retrieve chip ip from cloud.\");\n    }\n  }\n  changeSelectedChip(mac, event) {\n    console.log(\"Selected:\" + mac);\n    this.setState({\n      mac: mac\n    });\n    if (event !== undefined) {\n      if (event.target !== undefined) {\n        setTimeout(() => {\n          event.target.complete();\n        }, 800);\n      }\n    }\n  }\n  async LoadChips() {\n    var data = JSON.stringify({\n      roomid: this.props.properties.roomid\n    });\n    this.setState({\n      roomid: this.props.properties.roomid\n    });\n    var chips = JSON.parse(localStorage.getItem(this.props.properties.roomid));\n    if (chips !== null) {\n      if (chips.length > 0) {\n        this.setState({\n          switchitems: chips\n        });\n        this.setState({\n          mac: chips[0].mac\n        });\n      }\n    }\n    const response = await retrieveSwitchControllers(data);\n    if (response !== undefined) {\n      console.log(response[0]);\n      switch (response[0].status) {\n        case 200:\n          if (response[0].data.switchControllers.length > 0) {\n            this.setState({\n              switchitems: response[0].data.switchControllers\n            });\n            localStorage.setItem(this.state.roomid, JSON.stringify(response[0].data.switchControllers));\n            this.setState({\n              mac: response[0].data.switchControllers[0].mac\n            });\n            for (var i = 0; i < response[0].data.switchControllers.length; i++) {\n              localStorage.setItem(response[0].data.switchControllers[i].mac, JSON.stringify(response[0].data.switchControllers[i]));\n            }\n          } else {\n            this.setState({\n              showSetupBuilderChipModal: true\n            });\n          }\n          break;\n        default:\n          toastMsg = \"Could not retrieve chips from server.\";\n          this.handleToast();\n          break;\n      }\n    } else {\n      toastMsg = \"Could not retrieve chips from server.\";\n      this.handleToast();\n    }\n  }\n  setTimer(item) {\n    console.log(item);\n    this.setState(() => ({\n      showPopover: undefined\n    }));\n    this.props.component({\n      ComponentType: \"AUTOMATION\",\n      ComponentProperties: {\n        displayPage: \"timers\",\n        showTimSetAlert: [{\n          mac: this.state.mac,\n          slotnumber: item.slotnumber,\n          name: item.slotname\n        }],\n        name: item.slotname\n      }\n    });\n  }\n  setSchedule(item) {\n    console.log(item);\n    this.setState(() => ({\n      showPopover: undefined\n    }));\n    this.props.component({\n      ComponentType: \"AUTOMATION\",\n      ComponentProperties: {\n        displayPage: \"schedules\",\n        showSchSetAlert: [{\n          mac: this.state.mac,\n          slotnumber: item.slotnumber,\n          name: item.slotname\n        }],\n        name: item.slotname,\n        setMac: this.state.mac\n      }\n    });\n  }\n  addToGroup() {\n    this.setState({\n      showGroupActionSheet: true\n    });\n  }\n  addToNewGroup() {\n    var slotnumber = this.state.showPopover.slotnumber;\n    this.setState(() => ({\n      showPopover: undefined\n    }));\n    this.props.component({\n      ComponentType: \"GROUPS\",\n      ComponentProperties: {\n        showCreateGroupAlert: true,\n        slotnumber: slotnumber,\n        mac: this.state.mac\n      }\n    });\n  }\n  backButton() {\n    this.props.component({\n      ComponentType: \"HOME\"\n    });\n  }\n  render() {\n    let roomname = this.props.properties.roomname;\n    return /*#__PURE__*/React.createElement(IonContent, null, /*#__PURE__*/React.createElement(ScriptTag, {\n      isHydrating: true,\n      onLoad: () => this.cloudSocket(),\n      type: \"text/javascript\",\n      src: SOCKETIOLIB\n    }), /*#__PURE__*/React.createElement(IonHeader, {\n      class: \"ion-no-border\"\n    }, /*#__PURE__*/React.createElement(IonToolbar, {\n      mode: \"ios\",\n      color: \"light-tint\"\n    }, /*#__PURE__*/React.createElement(IonButton, {\n      slot: \"start\",\n      fill: \"clear\",\n      color: \"dark\",\n      onClick: () => this.backButton()\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: arrowBack,\n      size: \"medium\"\n    })), /*#__PURE__*/React.createElement(IonTitle, {\n      slot: \"secondary\"\n    }, roomname))), /*#__PURE__*/React.createElement(IonSegment, {\n      className: \"segment\",\n      scrollable: \"true\",\n      mode: \"md\",\n      value: defaultChipName\n    }, this.state.switchitems.map(item => {\n      return /*#__PURE__*/React.createElement(IonSegmentButton, {\n        type: \"button\",\n        id: item.mac,\n        onClick: () => this.changeSelectedChip(item.mac),\n        value: item.mac,\n        className: this.state.mac === item.mac ? \"segment-btn-selected\" : \"segment-btn-unselected\"\n      }, /*#__PURE__*/React.createElement(IonLabel, {\n        color: this.state.mac !== item.mac ? \"dark-tint\" : \"light-tint\",\n        style: {\n          fontSize: \"13px\"\n        }\n      }, item.name));\n    }), /*#__PURE__*/React.createElement(IonSegmentButton, {\n      type: \"button\",\n      className: \"segment-btn-unselected\",\n      onClick: () => this.showSetupBuilderChipModal()\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: addCircle,\n      size: \"large\",\n      color: \"dark\",\n      className: \"io-icon\"\n    }))), /*#__PURE__*/React.createElement(IonRefresher, {\n      slot: \"fixed\",\n      onIonRefresh: event => this.changeSelectedChip(this.state.mac, event)\n    }, /*#__PURE__*/React.createElement(IonRefresherContent, null)), /*#__PURE__*/React.createElement(SlotGrid, {\n      mac: this.state.mac,\n      isShortPressed: item => this.onClickBtnFn(item.slotnumber),\n      isLongPressed: item => this.setState(() => ({\n        showPopover: item\n      })),\n      slots: () => {},\n      addSlot: () => this.setState({\n        showSetupSlotModal: true\n      })\n    }), /*#__PURE__*/React.createElement(IonLoading, {\n      isOpen: this.state.toggleAttemting,\n      onDidDismiss: () => this.setState({\n        loading: false\n      }),\n      message: 'Please wait...'\n    }), /*#__PURE__*/React.createElement(IonPopover, {\n      isOpen: this.state.showPopover === undefined ? false : true,\n      onDidDismiss: () => this.setState(() => ({\n        showPopover: undefined\n      }))\n    }, /*#__PURE__*/React.createElement(IonItem, {\n      className: \"segment\"\n    }, /*#__PURE__*/React.createElement(IonListHeader, {\n      className: \"options-popover-title\"\n    }, this.state.showPopover !== undefined ? this.state.showPopover.slotname : \"\", \" options\")), /*#__PURE__*/React.createElement(IonItem, {\n      onClick: () => this.addToGroup()\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: addCircle,\n      size: \"large\",\n      className: \"io-icon\",\n      color: \"medium\"\n    }), /*#__PURE__*/React.createElement(IonLabel, null, \"Add to Group\")), /*#__PURE__*/React.createElement(IonItem, {\n      onClick: () => this.setTimer(this.state.showPopover)\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: timerSharp,\n      size: \"large\",\n      className: \"io-icon\",\n      color: \"medium\"\n    }), /*#__PURE__*/React.createElement(IonLabel, null, \"Set Timer\")), /*#__PURE__*/React.createElement(IonItem, {\n      onClick: () => this.setSchedule(this.state.showPopover)\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: calendarSharp,\n      size: \"medium\",\n      className: \"io-icon\",\n      color: \"medium\"\n    }), /*#__PURE__*/React.createElement(IonLabel, null, \"Set Schedule\"))), /*#__PURE__*/React.createElement(AddToGroupModal, {\n      isOpen: this.state.showPickGroupModal,\n      onDidDismiss: (show, msg) => this.setState(() => ({\n        showPickGroupModal: false,\n        showPopover: undefined,\n        showToast: show,\n        toastMsg: msg\n      })),\n      mac: this.state.mac,\n      slotnumber: this.state.showPopover === undefined ? 0 : this.state.showPopover.slotnumber\n    }), /*#__PURE__*/React.createElement(IonActionSheet, {\n      isOpen: this.state.showGroupActionSheet,\n      mode: \"md\",\n      onDidDismiss: () => this.setState(() => ({\n        showGroupActionSheet: false\n      })),\n      buttons: [{\n        text: 'New group',\n        role: 'destructive',\n        icon: addCircle,\n        handler: () => {\n          this.addToNewGroup();\n        }\n      }, {\n        text: 'Add to existing group',\n        role: 'destructive',\n        icon: bulb,\n        handler: () => {\n          this.setState(() => ({\n            showPickGroupModal: true\n          }));\n        }\n      }]\n    }), /*#__PURE__*/React.createElement(IonModal, {\n      containerStyle: test,\n      isOpen: this.state.showSetupBuilderChipModal,\n      onClose: this.close\n    }, /*#__PURE__*/React.createElement(SetupBuilderChipModalComponentHolder, {\n      component: {\n        ComponentType: 1,\n        ComponentProperties: {\n          roomid: this.state.roomid\n        }\n      },\n      onDidDismiss: bool => this.setState({\n        showSetupBuilderChipModal: !bool\n      })\n    })), /*#__PURE__*/React.createElement(IonModal, {\n      containerStyle: test,\n      isOpen: this.state.showSetupSlotModal\n    }, /*#__PURE__*/React.createElement(SetupSlotModalComponentHolder, {\n      component: {\n        ComponentType: 1,\n        ComponentProperties: {\n          mac: this.state.mac\n        }\n      },\n      onDidDismiss: () => this.setState({\n        showSetupSlotModal: false\n      })\n    })), /*#__PURE__*/React.createElement(IonToast, {\n      isOpen: this.state.showToast,\n      onDidDismiss: () => {\n        this.setState(() => ({\n          showToast: false\n        }));\n      },\n      message: this.state.toastMsg,\n      duration: 3000\n    }));\n  }\n}\nexport default withRouter(RoomComponent);","map":{"version":3,"names":["IonContent","IonIcon","IonButton","IonLabel","IonItem","IonSegmentButton","IonSegment","IonToolbar","IonTitle","IonHeader","IonToast","IonRefresher","IonRefresherContent","IonPopover","IonLoading","IonActionSheet","IonModal","IonListHeader","hardwareChip","addCircle","tvSharp","bulb","arrowBack","pencilSharp","timerSharp","calendarSharp","React","withRouter","ScriptTag","AddToGroupModal","SlotGrid","retrieveSwitchControllers","SOCKETIOLIB","SetupBuilderChipModalComponentHolder","SetupSlotModalComponentHolder","toggleSlot","getChipMac","startTimer","SOCKETIOHOST","retrieveSlots","defaultChipName","iconname","contentStyle","height","justifyContent","width","test","borderRadius","margin","display","position","left","right","top","border","transform","padding","background","toastMsg","data","auth_token","IP","check","username","JSON","parse","localStorage","getItem","slot_count","localSocket","RoomComponent","Component","constructor","props","_isMounted","state","roomid","switchitems","name","mac","ip","showPopover","undefined","slotCount","showToast","showGroupActionSheet","showPickGroupModal","showSetupBuilderChipModal","showSetupSlotModal","toggleAttemting","setState","closeSetupBuilderChipModal","refreshPage","window","location","reload","sloticonfn","e","componentDidMount","LoadChips","document","addEventListener","ev","detail","register","component","ComponentType","console","log","componentWillUnmount","socket","close","err","cloudSocket","script","createElement","innerHTML","async","body","appendChild","String","chips","i","length","macJson","stringify","emit","on","message","chipstate","websocketfn","WebSocket","ctx","onmessage","evt","type","split","updateChipState","onopen","onclose","handleToast","tshow","onClickBtnFn","slotnumber","slotnum","isIPCorrect","verifyMac","response","status","slot","getIPfromCloud","existing","setItem","changeSelectedChip","event","target","setTimeout","complete","properties","switchControllers","setTimer","item","ComponentProperties","displayPage","showTimSetAlert","slotname","setSchedule","showSchSetAlert","setMac","addToGroup","addToNewGroup","showCreateGroupAlert","backButton","render","roomname","map","fontSize","loading","show","msg","text","role","icon","handler","bool"],"sources":["C:/Users/Nithin.DESKTOP-4GS3RPD/Music/synkd-kasturi/synkd-kasturi/src/pages/Room/RoomComponent.jsx"],"sourcesContent":["/* This page loads all the slots available for a chip*/\n\nimport {\n  IonContent,\n  IonIcon,\n  IonButton,\n  IonLabel,\n  IonItem,\n  IonSegmentButton,\n  IonSegment,\n  IonToolbar,\n  IonTitle,\n  IonHeader,\n  IonToast,\n  IonRefresher,\n  IonRefresherContent,\n  IonPopover,\n  IonLoading,\n  IonActionSheet,\n  IonModal,\n  IonListHeader\n} from \"@ionic/react\";\nimport { hardwareChip, addCircle, tvSharp, bulb, arrowBack, pencilSharp, timerSharp, calendarSharp } from \"ionicons/icons\";\nimport React from \"react\";\nimport { withRouter } from \"react-router\";\n//import Websocket from \"react-websocket\";\nimport ScriptTag from \"react-script-tag\";\nimport \"./Slots.css\";\nimport AddToGroupModal from \"./UI/AddToGroupModal\";\nimport SlotGrid from \"./UI/SlotGrid\";\n\nimport {retrieveSwitchControllers, SOCKETIOLIB}  from \"../ServerRequests/globalApi\";\nimport SetupBuilderChipModalComponentHolder from \"../BuilderChip/SetupBuilderChipModalComponentHolder\";\nimport SetupSlotModalComponentHolder from \"./SetupSlotModalComponentHolder\";\nimport { toggleSlot, getChipMac, startTimer } from \"../ServerRequests/localApi\";\nimport { SOCKETIOHOST, retrieveSlots } from \"../ServerRequests/globalApi\";\n\n\nvar defaultChipName = \"\";\nvar iconname = \"\";\n\nconst contentStyle = {\n  height: \"90px\",\n  justifyContent: \"center\",\n  width: \"90px\",\n};\n\nconst test = {\n  borderRadius: \"1rem\",\n  width: \"15rem\",\n  height: \"12rem\",\n  margin: \"0px auto\",\n  display: \"table\",\n  position: \"absolute\",\n  left: \"50%\",\n  right: \"50%\",\n  top: \"50%\",\n  border: \"1px solid\",\n  transform: \"translate(-50%, -50%)\",\n  padding: \"5px 20px 13px\",\n  background: \"rgb(255, 255, 255)\",\n};\n\nvar toastMsg = \"\";\n\nvar data = \"\";\nvar auth_token = \"\";\nvar IP = \"\";\nvar check = \"\";\nvar username = JSON.parse(localStorage.getItem(\"username\"));\nvar slot_count;\nvar localSocket;\n\n\nclass RoomComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._isMounted = true;\n\n    auth_token = JSON.parse(localStorage.getItem(\"token\"));\n    this.state = {\n      roomid: \"\",\n      switchitems: [],\n      name: \"\",\n      state: \"0\",\n      mac: \"\",\n      ip: \"\",\n      showPopover: undefined,\n      slotCount: 8,\n      showToast: false,\n      showGroupActionSheet: false,\n      showPickGroupModal: false,\n      showSetupBuilderChipModal: false,\n      showSetupSlotModal: false,\n      toggleAttemting: false\n\n      \n  \n      \n    };\n\n  }\n\n\n  showSetupBuilderChipModal() {this.setState({ showSetupBuilderChipModal: true });}\n\n  closeSetupBuilderChipModal() {this.setState({ showSetupBuilderChipModal: false });}\n\n\n\n  refreshPage() {\n    window.location.reload();\n  }\n\n  sloticonfn(e) {\n    if (e === tvSharp) {\n      iconname = tvSharp;\n      return iconname;\n    }\n    if (e === bulb) {\n      iconname = bulb;\n      return iconname;\n    }\n  }\n\n\n\n \n  componentDidMount() {\n    this._isMounted = true;\n\n    this.LoadChips();\n    \n\n\n    document.addEventListener('ionBackButton', (ev) => {\n      ev.detail.register(10, () => {\n        this.props.component({ ComponentType: \"HOME\" });\n        console.log(\"Back Pressed\");\n      });\n    });\n    \n\n  }\n\n\n\n  componentWillUnmount(){\n    try{\n      if(window.socket !==undefined){window.socket.close();}\n      if(localSocket !==undefined){localSocket.close();}\n      console.log('Disconnected Sockets.');  \n    }\n    catch(err){ console.log(err); }\n   \n      this._isMounted = false;\n   \n  }\n  \n\n\n\n\n\n \n\n\n\n\n\n\n  cloudSocket() {\n    const script = document.createElement(\"script\");\n    script.innerHTML += \"var socket = io.connect('\"+SOCKETIOHOST+\"');\";\n    script.innerHTML += \"window.socket = socket;\";\n    script.async = true;\n    document.body.appendChild(script);\n    console.log(\"entered cloud socket:\"+String(window.socket));\n\n    var chips = JSON.parse(localStorage.getItem(this.state.roomid));\n    if(chips !== null){\n      for(var i=0; i<chips.length; i++)\n      {  var macJson = JSON.parse(JSON.stringify({mac: chips[i].mac}));\n         window.socket.emit(\"subscribe\",   macJson);  }\n    }\n   \n\n    window.socket.on(\"connect_error\", (err) => {\n      console.log(`connect_error due to ${err.message}`);\n    });\n\n    window.socket.on(\"state\", (data) => {\n      console.log(\"sio state: \"+data.state);\n      this.setState({chipstate: data.state});\n    });\n\n    window.socket.on(\"connected\", (data) => {\n      console.log(\"connected to socketio\");\n    });\n\n    window.socket.on(\"connection\", (data) => {\n      console.log(\"connection to socketio\");\n    });\n\n    window.socket.on(\"connect\", (data) => {\n      console.log(\"connect to socketio\");\n    });\n  }\n\n\n\n\n\n\n\n  websocketfn() {\n    IP = JSON.parse(localStorage.getItem(this.state.mac)).ip;\n    localSocket = new WebSocket(\"ws://\"+IP+\":81/\");\n    console.log(\"Local IP:\" + IP);\n\n    var ctx = this;\n\n    localSocket.onmessage = function (evt) {\n\n      var type = evt.data.split(\"~\")[0];\n      var mac = evt.data.split(\"~\")[1];\n      var chipstate = evt.data.split(\"~\")[2];\n\n      if((mac === this.state.mac) && (type === \"state\")){\n        console.log(\"lws\");\n        ctx.updateChipState(chipstate);\n      }\n    };\n    localSocket.onopen = function (evt) {\n      console.log(\"Local WS Open\");\n    };\n\n    localSocket.onclose = function (evt) {\n      console.log(\"Local WS CLosed\");\n    };\n  }\n\n\n\n\n\n  handleToast() {\n    this.setState({\n      tshow: !this.state.tshow\n    });\n  }\n\n \n  \n\n\n  async onClickBtnFn(slotnumber) {\n    console.log(\"Tapped\", slotnumber);\n    this.setState({toggleAttemting: true});\n    var slotnum = slotnumber - 1;\n    IP = JSON.parse(localStorage.getItem(this.state.mac)).ip;\n    \n    const isIPCorrect = await this.verifyMac();\n    if(isIPCorrect){\n\n\n    var response = await toggleSlot(IP, slotnum);\n\n      if(response !== undefined){\n\n\n\n        switch(response[0].status){\n\n          case 200||302:\n            console.log(\"Toggled slot \"+slotnum+\" via local ws.\");\n            break;\n\n            default:\n              console.log(\"Failed to toggle slot via local ws. Attempting toggle via cloud.(SocketIO)\");\n              console.log(\"Failed to toggle slot via local ws.\");\n              window.socket.emit(\"toggle\", { mac: this.state.mac, slot: slotnum });\n              // window.socket.emit(\"timer-start\", { mac: this.state.mac, slot: slotnum });\n              break;\n        }\n\n      }else{\n        console.log(\"Failed to toggle slot via local ws. Attempting toggle via cloud.(SocketIO)\");\n       try{\n        window.socket.emit(\"toggle\", { mac: this.state.mac, slot: slotnum });\n        // window.socket.emit(\"timer-start\", { mac: this.state.mac, slot: slotnumber });\n       }catch{\n         toastMsg = \"Failed to toggle device. Please try again.\"\n         this.handleToast();\n       }\n       \n      }\n\n\n    }else{\n      console.log(\"Failed to toggle slot via local ws. Attempting toggle via cloud.(SocketIO)\");\n      try{\n        window.socket.emit(\"toggle\", { mac: this.state.mac, slot: slotnum });\n        // window.socket.emit(\"timer-start\", { mac: this.state.mac, slot: slotnumber });\n       }catch{\n         toastMsg = \"Failed to toggle device. Please try again.\"\n         this.handleToast();\n       }\n    }\n\n    this.setState({toggleAttemting: false});\n\n  }\n\n\n\n  async verifyMac(){\n\n    var chips = JSON.parse(localStorage.getItem(this.state.roomid));\n    console.log(this.state.roomid);\n\n    for(var i=0; i<chips.length; i++)\n    { if(chips[i] === this.state.mac)\n      {IP = JSON.parse(localStorage.getItem(this.state.mac)).ip;}}\n    \n      const response = await getChipMac(IP);\n\n      if(response !== undefined){\n        console.log(response[0]);\n\n        switch(response[0].status){\n          \n          case 200:\n            if(response[0].data.mac === this.state.mac)\n            {return true;}\n            else\n            {\n              console.log(\"Incorrect local IP.\");\n              this.getIPfromCloud();\n              return false;\n            }\n            \n\n          case 404:\n            console.log(\"Could not verify local IP. Error:\"+response[0].data);\n            return false;\n          \n          default :\n            console.log(\"Could not verify local IP. Error:\"+response[0].data);\n            return false;\n\n        }\n  \n   \n        }else{return false;}\n\n  }\n\n\n  async getIPfromCloud(){\n      \n    var data = JSON.stringify({mac: this.state.mac});\n    console.log(\"Attempting to get new ip of \"+this.state.mac);\n\n    \n\n    const response = await retrieveSlots(data);\n\n    if(response !== undefined){\n      console.log(response[0]);\n      switch(response[0].status){\n\n        case 200:\n            var existing = JSON.parse(localStorage.getItem(this.state.mac));\n            existing.ip = response[0].data.ip;\n            localStorage.setItem(this.state.mac, existing);\n            console.log(\"Attempt to retrieve ip from cloud sucessful.\");\n\n            // this.websocketfn();\n          break;\n\n          default:\n            console.log(\"Could not retrieve chip ip from cloud.\");\n            break;\n          }\n        }else{console.log(\"Could not retrieve chip ip from cloud.\");}\n        \n    \n  }\n\n\n\n\nchangeSelectedChip(mac, event){\n  console.log(\"Selected:\"+mac);\n  this.setState({mac: mac});\n\n  if(event !== undefined){\n    if(event.target !== undefined){\n      setTimeout(() =>{\n        event.target.complete()\n        }, 800);\n    }\n \n  }\n}\n\n\n\n\n\n async LoadChips(){\n    \n      var data = JSON.stringify({roomid: this.props.properties.roomid});\n      \n      this.setState({roomid: this.props.properties.roomid});\n\n\n\n      var chips = JSON.parse(localStorage.getItem(this.props.properties.roomid));\n\n      if(chips !== null){\n        if(chips.length > 0){\n          this.setState({ switchitems: chips });\n          this.setState({mac: chips[0].mac});\n          }\n      }\n      \n\n\n\n      const response = await retrieveSwitchControllers(data);\n\n      \n      if(response !== undefined){\n        console.log(response[0]);\n        switch(response[0].status){\n  \n          case 200:\n              if(response[0].data.switchControllers.length > 0){\n              this.setState({ switchitems: response[0].data.switchControllers });\n              localStorage.setItem(this.state.roomid, JSON.stringify(response[0].data.switchControllers));\n              this.setState({mac: response[0].data.switchControllers[0].mac});\n\n\n              for(var i=0; i<response[0].data.switchControllers.length; i++ )\n              {localStorage.setItem(response[0].data.switchControllers[i].mac,\n                 JSON.stringify(response[0].data.switchControllers[i]));}\n              }\n              else{this.setState({showSetupBuilderChipModal: true});}\n              \n         \n          break;\n\n          default:\n            toastMsg = \"Could not retrieve chips from server.\";\n            this.handleToast();\n          break;\n      }\n      \n    \n  }else{\n    toastMsg = \"Could not retrieve chips from server.\";\n            this.handleToast();\n  }\n}\n\n\n  setTimer(item){\n    console.log(item);\n    this.setState(() =>({showPopover: undefined}));\n    this.props.component({ ComponentType: \"AUTOMATION\" , \n    ComponentProperties:{ displayPage: \"timers\", \n                          showTimSetAlert: [{mac: this.state.mac, slotnumber: item.slotnumber, name: item.slotname}], \n                          name: item.slotname}});\n  }\n\n  setSchedule(item){\n    console.log(item);\n    this.setState(() =>({showPopover: undefined}));\n    this.props.component({ ComponentType: \"AUTOMATION\" , \n    ComponentProperties:{ displayPage: \"schedules\", \n                          showSchSetAlert: [{mac: this.state.mac, slotnumber: item.slotnumber, name: item.slotname}],\n                          name: item.slotname,\n                          setMac: this.state.mac\n                        }});\n  }\n\n  addToGroup()\n  {this.setState({showGroupActionSheet: true});}\n\n  addToNewGroup(){\n    var slotnumber = this.state.showPopover.slotnumber;\n    this.setState(() => ({showPopover: undefined}));\n    this.props.component({ComponentType: \"GROUPS\", ComponentProperties: {showCreateGroupAlert: true, slotnumber: slotnumber, mac: this.state.mac}});\n  }\n\n  backButton(){this.props.component({ComponentType: \"HOME\"});}\n\n\n\n  \n\n  render() {\n\n    let roomname = this.props.properties.roomname;\n\n\n \n    return (\n      <IonContent>\n         \n           <ScriptTag\n              isHydrating={true}\n              onLoad={() => this.cloudSocket()}\n              type=\"text/javascript\"\n              src={SOCKETIOLIB}\n            />  \n         <IonHeader class=\"ion-no-border\" >\n                 <IonToolbar  mode=\"ios\" color=\"light-tint\" >\n                  <IonButton slot=\"start\"\n                             fill=\"clear\"\n                             color=\"dark\"\n                             onClick={() => this.backButton()}\n                             >\n        \n                            <IonIcon\n                              icon={arrowBack}\n                              size=\"medium\"\n                             >\n                            </IonIcon>\n                  \n                  </IonButton>\n                  <IonTitle slot=\"secondary\">{roomname}</IonTitle>\n                  </IonToolbar>\n            </IonHeader>\n       \n       \n          <IonSegment\n           className=\"segment\"\n            scrollable=\"true\"\n            mode=\"md\"\n            value={defaultChipName}\n          >\n            {this.state.switchitems.map((item) => {\n              return (\n                <IonSegmentButton\n                  type=\"button\"\n                  id={item.mac}\n                  onClick={() => this.changeSelectedChip(item.mac)}\n                  value={item.mac}\n                  className={this.state.mac===item.mac?\"segment-btn-selected\":\"segment-btn-unselected\"}\n                >\n                  <IonLabel color={this.state.mac!==item.mac?\"dark-tint\":\"light-tint\"} style={{ fontSize: \"13px\" }}>{item.name}</IonLabel>\n                </IonSegmentButton>\n              );\n            })}\n            <IonSegmentButton type=\"button\" className=\"segment-btn-unselected\" onClick={() => this.showSetupBuilderChipModal()}>\n              \n            <IonIcon\n                icon={addCircle}\n                size=\"large\"\n                color=\"dark\"\n                className=\"io-icon\"\n              ></IonIcon>\n              \n             \n            </IonSegmentButton>\n          </IonSegment>\n          <IonRefresher slot=\"fixed\" onIonRefresh={(event) => this.changeSelectedChip(this.state.mac, event)} >\n          <IonRefresherContent />\n          </IonRefresher>\n        <SlotGrid\n         mac={this.state.mac}\n         isShortPressed={(item) => this.onClickBtnFn(item.slotnumber)}\n         isLongPressed={(item) => this.setState(() => ({showPopover: item}))}\n         slots={() =>{}}\n         addSlot={() =>   this.setState({showSetupSlotModal: true})}\n         /> \n\n          <IonLoading\n            isOpen={this.state.toggleAttemting}\n            onDidDismiss={() => this.setState({loading: false})}\n            message={'Please wait...'}\n          />\n        <IonPopover\n          isOpen={this.state.showPopover === undefined?false:true}\n          onDidDismiss={() => this.setState(() => ({showPopover: undefined}))}\n        >\n          <IonItem\n           className=\"segment\"\n           >\n            <IonListHeader className=\"options-popover-title\">{this.state.showPopover !== undefined?this.state.showPopover.slotname:\"\"} options</IonListHeader>\n          </IonItem>\n\n\n          <IonItem\n           onClick={() => this.addToGroup()}>\n            <IonIcon\n                icon={addCircle}\n                size=\"large\"\n                className=\"io-icon\"\n                color=\"medium\"\n              ></IonIcon>\n            <IonLabel>Add to Group</IonLabel>\n          </IonItem>\n\n\n          {/* <IonItem>\n              <IonIcon\n                    icon={pencilSharp}\n                    size=\"large\"\n                    className=\"io-icon\"\n                    color=\"medium\"\n                  ></IonIcon>\n                <IonLabel>Edit</IonLabel>\n          </IonItem>  */}\n\n\n          <IonItem\n           onClick={() => this.setTimer(this.state.showPopover)}>\n            <IonIcon\n                      icon={timerSharp}\n                      size=\"large\"\n                      className=\"io-icon\"\n                      color=\"medium\" \n                    ></IonIcon>\n                  <IonLabel>Set Timer</IonLabel>\n\n           \n                \n          </IonItem>\n\n\n          <IonItem\n            onClick={() => this.setSchedule(this.state.showPopover)}>\n                <IonIcon\n                      icon={calendarSharp}\n                      size=\"medium\"\n                      className=\"io-icon\"\n                      color=\"medium\"\n                    ></IonIcon>\n                  <IonLabel>Set Schedule</IonLabel>\n          </IonItem>\n        </IonPopover>\n\n\n        \n\n       \n\n        \n         \n\n          <AddToGroupModal  \n          isOpen={this.state.showPickGroupModal}  \n          onDidDismiss={(show, msg) => this.setState(() => ({showPickGroupModal: false, \n            showPopover:undefined, showToast: show,  toastMsg: msg}))}\n          mac={this.state.mac}\n          slotnumber={this.state.showPopover === undefined?0:this.state.showPopover.slotnumber}\n          />\n\n\n          <IonActionSheet\n          isOpen={this.state.showGroupActionSheet}\n          mode=\"md\"\n          onDidDismiss={() => this.setState(()=>({showGroupActionSheet: false}))}\n          buttons={[{\n            text: 'New group',\n            role: 'destructive',\n            icon: addCircle,\n            handler: () => {this.addToNewGroup()}\n            \n          },{\n            text: 'Add to existing group',\n            role: 'destructive',\n            icon: bulb,\n            handler: () => {\n              this.setState(() => ({showPickGroupModal: true}))\n            }\n          }]}>\n            \n           \n\n          </IonActionSheet>\n          \n          <IonModal\n            containerStyle={test}\n            isOpen={this.state.showSetupBuilderChipModal}\n            onClose={this.close}\n          >\n            <SetupBuilderChipModalComponentHolder \n            component=\n            {{ComponentType: 1, ComponentProperties: {roomid: this.state.roomid}}}\n            onDidDismiss={(bool)=> this.setState({showSetupBuilderChipModal: !bool})}/>\n            \n          </IonModal>\n\n          <IonModal\n            containerStyle={test}\n            isOpen={this.state.showSetupSlotModal}\n          >\n            <SetupSlotModalComponentHolder\n            component={{ ComponentType: 1, ComponentProperties: {mac: this.state.mac} }}\n            onDidDismiss={() => this.setState({showSetupSlotModal: false})}\n            >\n\n            </SetupSlotModalComponentHolder>\n\n            \n            </IonModal>\n\n          <IonToast\n            isOpen={this.state.showToast}\n            onDidDismiss={() => {this.setState(() => ({showToast: false}))}}\n            message={this.state.toastMsg}\n            duration={3000}\n          />\n        </IonContent>\n      \n    );\n  }\n}\n\nexport default withRouter(RoomComponent);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}