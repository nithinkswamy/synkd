{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nithin.DESKTOP-4GS3RPD\\\\Music\\\\synkd-kasturi\\\\synkd-kasturi\\\\src\\\\pages\\\\Groups\\\\UI\\\\LongPressPopover.jsx\";\nimport { trash, pencilSharp, timerSharp, calendarSharp } from \"ionicons/icons\";\nimport React from \"react\";\nimport { IonTitle, IonIcon, IonItem, IonPopover, IonList, IonLoading, IonAlert } from \"@ionic/react\";\nimport EditGroupModal from \"./EditGroupModal\";\nimport { deleteGroup } from \"../../ServerRequests/globalApi\";\nimport { withRouter } from \"react-router\";\nclass LongPressPopover extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showEditGroupModal: false,\n      isOpen: true,\n      loading: false,\n      deleteAlert: false,\n      toDeleteID: \"\"\n    };\n  }\n  async deleteGroup() {\n    var homeid = JSON.parse(localStorage.getItem(\"homeid\"));\n    var data = JSON.stringify({\n      homeid: homeid,\n      groupid: this.state.toDeleteID\n    });\n    const response = await deleteGroup(data);\n    if (response[0] !== undefined) {\n      switch (response[0].status) {\n        case 200:\n          this.setState({\n            loading: false,\n            isOpen: false\n          });\n          break;\n        default:\n          this.setState({\n            loading: false\n          });\n          break;\n      }\n    } else {\n      this.setState({\n        loading: false\n      });\n    }\n  }\n  setTimer() {\n    var slots = [];\n    this.props.group.slots.forEach(element => {\n      slots.push(element);\n    });\n    this.props.component({\n      ComponentType: \"AUTOMATION\",\n      ComponentProperties: {\n        displayPage: \"timers\",\n        showTimSetAlert: slots,\n        name: this.props.group.name\n      }\n    });\n  }\n  setSchedule() {\n    var slots = [];\n    this.props.group.slots.forEach(element => {\n      slots.push(element);\n    });\n    this.props.component({\n      ComponentType: \"AUTOMATION\",\n      ComponentProperties: {\n        displayPage: \"schedules\",\n        showSchSetAlert: slots,\n        name: this.props.group.name\n      }\n    });\n    console.log(\"G SLots\" + JSON.stringify(slots));\n  }\n  render() {\n    let item = this.props.group;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(IonLoading, {\n      isOpen: this.state.loading,\n      onDidDismiss: () => this.setState({\n        loading: false\n      }),\n      message: 'Please Wait...'\n    }), /*#__PURE__*/React.createElement(IonPopover, {\n      mode: \"md\",\n      isOpen: this.state.isOpen,\n      onDidDismiss: () => {\n        this.props.onDidDismiss();\n      }\n    }, /*#__PURE__*/React.createElement(IonTitle, {\n      style: {\n        margin: \"0.5em\"\n      }\n    }, item.name, \" options\"), /*#__PURE__*/React.createElement(IonList, {\n      style: {\n        padding: \"0.5em\"\n      }\n    }, /*#__PURE__*/React.createElement(IonItem, {\n      button: true,\n      onClick: () => this.setState({\n        showEditGroupModal: true\n      })\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: pencilSharp,\n      size: \"large\",\n      className: \"io-icon\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        padding: \"0.5em\"\n      }\n    }, \"Edit\")), /*#__PURE__*/React.createElement(IonItem, {\n      button: true,\n      onClick: this.setTimer.bind(this, item.groupid)\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: timerSharp,\n      size: \"large\",\n      className: \"io-icon\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        padding: \"0.5em\"\n      }\n    }, \"Set Timer\")), /*#__PURE__*/React.createElement(IonItem, {\n      button: true,\n      onClick: this.setSchedule.bind(this, item.groupid)\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: calendarSharp,\n      size: \"large\",\n      className: \"io-icon\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        padding: \"0.5em\"\n      }\n    }, \"Set Schedule\")), /*#__PURE__*/React.createElement(IonItem, {\n      button: true,\n      onClick: () => this.setState({\n        deleteAlert: true,\n        toDeleteID: item._id\n      })\n    }, /*#__PURE__*/React.createElement(IonIcon, {\n      icon: trash,\n      size: \"large\",\n      className: \"io-icon\"\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        padding: \"0.5em\"\n      }\n    }, \"Delete\")))), /*#__PURE__*/React.createElement(IonAlert, {\n      isOpen: this.state.deleteAlert,\n      onDidDismiss: () => this.setState({\n        deleteAlert: false\n      }),\n      header: 'Alert',\n      message: 'Are you sure you want to delete this group?',\n      buttons: [{\n        text: 'Cancel',\n        role: 'cancel',\n        cssClass: 'secondary',\n        handler: () => {\n          this.setState({\n            deleteAlert: false\n          });\n        }\n      }, {\n        text: 'Ok',\n        handler: () => {\n          console.log(this.state.toDeleteID);\n          this.deleteGroup();\n        }\n      }]\n    }), /*#__PURE__*/React.createElement(EditGroupModal, {\n      group: item,\n      isOpen: this.state.showEditGroupModal,\n      onDidDismiss: popoverDismiss => {\n        this.setState(() => ({\n          showEditGroupModal: false,\n          isOpen: !popoverDismiss\n        }));\n      },\n      slots: () => {}\n    }));\n  }\n}\nexport default withRouter(LongPressPopover);","map":{"version":3,"names":["trash","pencilSharp","timerSharp","calendarSharp","React","IonTitle","IonIcon","IonItem","IonPopover","IonList","IonLoading","IonAlert","EditGroupModal","deleteGroup","withRouter","LongPressPopover","Component","constructor","props","state","showEditGroupModal","isOpen","loading","deleteAlert","toDeleteID","homeid","JSON","parse","localStorage","getItem","data","stringify","groupid","response","undefined","status","setState","setTimer","slots","group","forEach","element","push","component","ComponentType","ComponentProperties","displayPage","showTimSetAlert","name","setSchedule","showSchSetAlert","console","log","render","item","onDidDismiss","margin","padding","bind","_id","text","role","cssClass","handler","popoverDismiss"],"sources":["C:/Users/Nithin.DESKTOP-4GS3RPD/Music/synkd-kasturi/synkd-kasturi/src/pages/Groups/UI/LongPressPopover.jsx"],"sourcesContent":["import { trash, pencilSharp, timerSharp, calendarSharp } from \"ionicons/icons\";\nimport React from \"react\";\nimport { \n  IonTitle,\n  IonIcon,\n  IonItem,\n  IonPopover,\n  IonList,\n  IonLoading,\n  IonAlert\n \n\n} from \"@ionic/react\";\n\nimport EditGroupModal from \"./EditGroupModal\";\nimport { deleteGroup } from \"../../ServerRequests/globalApi\";\nimport { withRouter } from \"react-router\";\n\n\n\n\nclass LongPressPopover extends React.Component{\n\n  constructor(props) {\n    super(props);\n\n    this.state={\n      showEditGroupModal: false,\n      isOpen: true,\n      loading: false,\n      deleteAlert: false,\n      toDeleteID: \"\"\n    }\n  }\n\n\n\n\nasync deleteGroup(){\n\n\n      var homeid = JSON.parse(localStorage.getItem(\"homeid\"));\n      var data = JSON.stringify({homeid: homeid, groupid: this.state.toDeleteID});\n      const response = await deleteGroup(data);\n\n      if(response[0] !== undefined){\n\n        switch(response[0].status){\n\n            case 200:\n              this.setState({loading: false, isOpen: false});\n              break;\n\n            default:\n              this.setState({loading: false});\n              break;\n        }\n\n      }else{  this.setState({loading: false});}\n        \n}\n\n\nsetTimer(){\n  var slots = [];\n  this.props.group.slots.forEach(element => {\n    slots.push(element);\n  }); \n  this.props.component({ ComponentType: \"AUTOMATION\" , \n  ComponentProperties:{ displayPage: \"timers\", showTimSetAlert: slots, name: this.props.group.name}});\n}\n\n\n\nsetSchedule(){\n  var slots = [];\n  this.props.group.slots.forEach(element => {\n    slots.push(element);\n  }); \n  this.props.component({ ComponentType: \"AUTOMATION\" , \n  ComponentProperties:{ displayPage: \"schedules\", showSchSetAlert: slots, name: this.props.group.name}});\n  console.log(\"G SLots\"+JSON.stringify(slots));\n}\n\n\n\n\nrender(){\nlet item = this.props.group;\n\n    return(       <div>\n                      <IonLoading\n                        isOpen={this.state.loading}\n                        onDidDismiss={() => this.setState({loading: false})}\n                        message={'Please Wait...'}/>\n\n                    <IonPopover\n                           mode=\"md\"\n                           isOpen={this.state.isOpen}\n                           onDidDismiss={() => {this.props.onDidDismiss()}}\n                        >\n                          <IonTitle style={{margin: \"0.5em\"}}>{item.name} options</IonTitle>\n                          <IonList style={{padding: \"0.5em\"}}>\n                            \n                              \n\n                            <IonItem\n                            button onClick={() => this.setState({showEditGroupModal: true})}\n                            >\n                              <IonIcon\n                                icon={pencilSharp}\n                                size=\"large\"\n                                className=\"io-icon\"\n                              ></IonIcon>\n                              <p style={{padding: \"0.5em\"}}>Edit</p>\n                            </IonItem>\n\n                            <IonItem\n                            button onClick={this.setTimer.bind(this, item.groupid)}\n                            >\n                              <IonIcon\n                                icon={timerSharp}\n                                size=\"large\"\n                                className=\"io-icon\"\n                              ></IonIcon>\n                               <p style={{padding: \"0.5em\"}}>Set Timer</p>\n                            </IonItem>\n\n                            <IonItem \n                            button onClick={this.setSchedule.bind(this, item.groupid)}\n                            >\n                              <IonIcon\n                              icon={calendarSharp}\n                              size=\"large\"\n                              className=\"io-icon\"\n                              ></IonIcon>\n                              <p style={{padding: \"0.5em\"}}>Set Schedule</p>\n                            </IonItem>\n\n                            <IonItem\n                            button onClick={() =>this.setState({deleteAlert: true, toDeleteID: item._id})}\n                            >\n                            <IonIcon\n                              icon={trash}\n                              size=\"large\"\n                              className=\"io-icon\"\n                              ></IonIcon>\n                              <p style={{padding: \"0.5em\"}}>Delete</p>\n                            </IonItem>\n\n                          </IonList>\n                        </IonPopover>\n                        <IonAlert\n                        isOpen={this.state.deleteAlert}\n                        onDidDismiss={() => this.setState({deleteAlert: false})}\n                        header={'Alert'}\n                        message={'Are you sure you want to delete this group?'}\n                         buttons={[\n                          {\n                            text: 'Cancel',\n                            role: 'cancel',\n                            cssClass: 'secondary',\n                            handler: () => {\n                              this.setState({deleteAlert: false})\n                            }\n                          },\n                          {\n                            text: 'Ok',\n                            handler: () => {\n                              console.log(this.state.toDeleteID)\n                              this.deleteGroup()\n                            }\n                          }\n                        ]}/>\n\n\n\n                         <EditGroupModal\n                          group={item}\n                          isOpen={this.state.showEditGroupModal}\n                          onDidDismiss={(popoverDismiss) => {this.setState(() =>({showEditGroupModal: false, isOpen: !popoverDismiss}))}}\n                          slots={() =>{}}\n                          /> \n                        </div>\n    );\n }\n}\n\n\n\nexport default withRouter(LongPressPopover);\n\n                       "],"mappings":"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"},"metadata":{},"sourceType":"module"}